[gd_scene load_steps=12 format=2]

[ext_resource path="res://addons/Voxel-Core/controls/VoxelViewer/VoxelViewer.gd" type="Script" id=1]
[ext_resource path="res://addons/Voxel-Core/controls/VoxelButton/VoxelButton.tscn" type="PackedScene" id=2]
[ext_resource path="res://addons/Voxel-Core/controls/TilesViewer/TilesViewer.tscn" type="PackedScene" id=3]
[ext_resource path="res://addons/Voxel-Core/defaults/VoxelSet.tres" type="Resource" id=4]

[sub_resource type="ButtonGroup" id=1]

[sub_resource type="Environment" id=2]
ambient_light_color = Color( 1, 1, 1, 1 )

[sub_resource type="SpatialMaterial" id=3]
flags_transparent = true
vertex_color_use_as_albedo = true
albedo_color = Color( 0.7, 0.7, 0.7, 1 )

[sub_resource type="PlaneMesh" id=4]

[sub_resource type="SpatialMaterial" id=5]
vertex_color_use_as_albedo = true

[sub_resource type="ArrayMesh" id=6]
surfaces/0 = {
"aabb": AABB( -1, -1, -1, 2.00001, 2, 2 ),
"array_data": PoolByteArray( 0, 0, 128, 63, 0, 0, 128, 191, 0, 0, 128, 191, 127, 0, 0, 0, 255, 255, 255, 0, 0, 0, 0, 0, 0, 0, 128, 63, 0, 0, 128, 191, 0, 0, 128, 63, 127, 0, 0, 0, 255, 255, 255, 0, 0, 188, 0, 0, 0, 0, 128, 63, 0, 0, 128, 63, 0, 0, 128, 191, 127, 0, 0, 0, 255, 255, 255, 0, 0, 0, 0, 188, 0, 0, 128, 63, 0, 0, 128, 63, 0, 0, 128, 63, 127, 0, 0, 0, 255, 255, 255, 0, 0, 188, 0, 188, 0, 0, 128, 191, 0, 0, 128, 191, 0, 0, 128, 63, 129, 0, 0, 0, 255, 255, 255, 0, 0, 0, 0, 0, 0, 0, 128, 191, 0, 0, 128, 191, 0, 0, 128, 191, 129, 0, 0, 0, 255, 255, 255, 0, 0, 188, 0, 0, 0, 0, 128, 191, 0, 0, 128, 63, 0, 0, 128, 63, 129, 0, 0, 0, 255, 255, 255, 0, 0, 0, 0, 188, 0, 0, 128, 191, 0, 0, 128, 63, 0, 0, 128, 191, 129, 0, 0, 0, 255, 255, 255, 0, 0, 188, 0, 188, 0, 0, 128, 63, 0, 0, 128, 63, 0, 0, 128, 63, 0, 127, 0, 0, 255, 255, 255, 0, 0, 0, 0, 0, 0, 0, 128, 191, 0, 0, 128, 63, 0, 0, 128, 63, 0, 127, 0, 0, 255, 255, 255, 0, 0, 188, 0, 0, 0, 0, 128, 63, 0, 0, 128, 63, 0, 0, 128, 191, 0, 127, 0, 0, 255, 255, 255, 0, 0, 0, 0, 188, 0, 0, 128, 191, 0, 0, 128, 63, 0, 0, 128, 191, 0, 127, 0, 0, 255, 255, 255, 0, 0, 188, 0, 188, 0, 0, 128, 191, 0, 0, 128, 191, 0, 0, 128, 63, 0, 129, 0, 0, 255, 255, 255, 0, 0, 0, 0, 0, 0, 0, 128, 63, 0, 0, 128, 191, 0, 0, 128, 63, 0, 129, 0, 0, 255, 255, 255, 0, 0, 188, 0, 0, 0, 0, 128, 191, 0, 0, 128, 191, 0, 0, 128, 191, 0, 129, 0, 0, 255, 255, 255, 0, 0, 0, 0, 188, 0, 0, 128, 63, 0, 0, 128, 191, 0, 0, 128, 191, 0, 129, 0, 0, 255, 255, 255, 0, 0, 188, 0, 188, 0, 0, 128, 191, 0, 0, 128, 191, 0, 0, 128, 191, 0, 0, 129, 0, 255, 255, 255, 0, 0, 0, 0, 0, 0, 0, 128, 63, 0, 0, 128, 191, 0, 0, 128, 191, 0, 0, 129, 0, 255, 255, 255, 0, 0, 188, 0, 0, 0, 0, 128, 191, 0, 0, 128, 63, 0, 0, 128, 191, 0, 0, 129, 0, 255, 255, 255, 0, 0, 0, 0, 188, 0, 0, 128, 63, 0, 0, 128, 63, 0, 0, 128, 191, 0, 0, 129, 0, 255, 255, 255, 0, 0, 188, 0, 188, 0, 0, 128, 63, 0, 0, 128, 191, 0, 0, 128, 63, 0, 0, 127, 0, 255, 255, 255, 0, 0, 0, 0, 0, 0, 0, 128, 191, 0, 0, 128, 191, 0, 0, 128, 63, 0, 0, 127, 0, 255, 255, 255, 0, 0, 188, 0, 0, 0, 0, 128, 63, 0, 0, 128, 63, 0, 0, 128, 63, 0, 0, 127, 0, 255, 255, 255, 0, 0, 0, 0, 188, 0, 0, 128, 191, 0, 0, 128, 63, 0, 0, 128, 63, 0, 0, 127, 0, 255, 255, 255, 0, 0, 188, 0, 188 ),
"array_index_data": PoolByteArray( 0, 0, 1, 0, 2, 0, 1, 0, 3, 0, 2, 0, 4, 0, 5, 0, 6, 0, 5, 0, 7, 0, 6, 0, 8, 0, 9, 0, 10, 0, 9, 0, 11, 0, 10, 0, 12, 0, 13, 0, 14, 0, 13, 0, 15, 0, 14, 0, 16, 0, 17, 0, 18, 0, 17, 0, 19, 0, 18, 0, 20, 0, 21, 0, 22, 0, 21, 0, 23, 0, 22, 0 ),
"blend_shape_data": [  ],
"format": 97563,
"index_count": 36,
"material": SubResource( 5 ),
"primitive": 4,
"skeleton_aabb": [  ],
"vertex_count": 24
}

[sub_resource type="BoxShape" id=7]

[node name="VoxelViewer" type="Control"]
anchor_right = 1.0
anchor_bottom = 1.0
script = ExtResource( 1 )
__meta__ = {
"_edit_use_anchors_": false
}

[node name="2DView" type="Control" parent="."]
visible = false
anchor_right = 1.0
anchor_bottom = 1.0
rect_clip_content = true
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Left" parent="2DView" instance=ExtResource( 2 )]
anchor_left = 0.176758
anchor_top = 0.366667
anchor_right = 0.34082
anchor_bottom = 0.646667
toggle_mode = true
group = SubResource( 1 )
VoxelColor = Color( 1, 1, 1, 0 )

[node name="Front" parent="2DView" instance=ExtResource( 2 )]
anchor_left = 0.34082
anchor_top = 0.366667
anchor_right = 0.504883
anchor_bottom = 0.646667
toggle_mode = true
group = SubResource( 1 )
VoxelColor = Color( 1, 1, 1, 0 )

[node name="Right" parent="2DView" instance=ExtResource( 2 )]
anchor_left = 0.504883
anchor_top = 0.366666
anchor_right = 0.668945
anchor_bottom = 0.646666
margin_left = -1.0
margin_top = 0.000335693
margin_right = -1.0
margin_bottom = 0.000335693
toggle_mode = true
group = SubResource( 1 )
VoxelColor = Color( 1, 1, 1, 0 )

[node name="Back" parent="2DView" instance=ExtResource( 2 )]
anchor_left = 0.668945
anchor_top = 0.366667
anchor_right = 0.833008
anchor_bottom = 0.646667
margin_left = -0.999939
margin_top = 1.52588e-05
margin_right = -0.999939
toggle_mode = true
group = SubResource( 1 )
VoxelColor = Color( 1, 1, 1, 0 )

[node name="Top" parent="2DView" instance=ExtResource( 2 )]
anchor_left = 0.34082
anchor_top = 0.0866667
anchor_right = 0.504883
anchor_bottom = 0.366666
toggle_mode = true
group = SubResource( 1 )
VoxelColor = Color( 1, 1, 1, 0 )

[node name="Bottom" parent="2DView" instance=ExtResource( 2 )]
anchor_left = 0.34082
anchor_top = 0.646667
anchor_right = 0.504883
anchor_bottom = 0.926667
toggle_mode = true
group = SubResource( 1 )
VoxelColor = Color( 1, 1, 1, 0 )

[node name="3DView" type="ViewportContainer" parent="."]
anchor_right = 1.0
anchor_bottom = 1.0
size_flags_horizontal = 3
size_flags_vertical = 3
stretch = true
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Viewport" type="Viewport" parent="3DView"]
size = Vector2( 1024, 600 )
own_world = true
transparent_bg = true
handle_input_locally = false
render_target_update_mode = 3
physics_object_picking = true

[node name="CameraPivot" type="Spatial" parent="3DView/Viewport"]

[node name="Camera" type="Camera" parent="3DView/Viewport/CameraPivot"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 5 )
environment = SubResource( 2 )

[node name="SelectPivot" type="Spatial" parent="3DView/Viewport"]
transform = Transform( 1, 0, 0, 0, -4.37114e-08, -1, 0, 1, -4.37114e-08, 0, 0, 0 )
visible = false

[node name="Select" type="MeshInstance" parent="3DView/Viewport/SelectPivot"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.01, 0 )
material_override = SubResource( 3 )
mesh = SubResource( 4 )
material/0 = null

[node name="VoxelPreview" type="MeshInstance" parent="3DView/Viewport"]
mesh = SubResource( 6 )
material/0 = null

[node name="VoxelStaticBody" type="StaticBody" parent="3DView/Viewport"]

[node name="CollisionShape" type="CollisionShape" parent="3DView/Viewport/VoxelStaticBody"]
shape = SubResource( 7 )

[node name="ToolBar" type="HBoxContainer" parent="."]
margin_left = 12.0
margin_top = 12.0
margin_right = 208.0
margin_bottom = 32.0
__meta__ = {
"_edit_use_anchors_": false
}

[node name="ViewMode" type="OptionButton" parent="ToolBar"]
margin_right = 64.0
margin_bottom = 20.0
rect_min_size = Vector2( 64, 20 )
size_flags_horizontal = 3
text = "3D"
align = 1
items = [ "2D", null, false, 0, null, "3D", null, false, 1, null ]
selected = 1

[node name="Hint" type="Label" parent="ToolBar"]
margin_left = 68.0
margin_right = 232.0
margin_bottom = 20.0
rect_min_size = Vector2( 164, 20 )
size_flags_horizontal = 3
size_flags_vertical = 3
valign = 1
__meta__ = {
"_edit_use_anchors_": false
}

[node name="ContextMenu" type="PopupMenu" parent="."]
anchor_right = 0.0878906
anchor_bottom = 0.206667
items = [ "Color side", null, 0, false, false, 0, 0, null, "", false, "Remove side's color", null, 0, false, false, 1, 0, null, "", false, "Texture side", null, 0, false, false, 2, 0, null, "", false, "Remove side's texture", null, 0, false, false, 3, 0, null, "", false, "", null, 0, false, false, -1, 0, null, "", true, "Color voxel", null, 0, false, false, 4, 0, null, "", false, "Texture voxel", null, 0, false, false, 5, 0, null, "", false, "Remove voxel's texture", null, 0, false, false, 6, 0, null, "", false ]
__meta__ = {
"_edit_use_anchors_": true
}

[node name="ColorMenu" type="WindowDialog" parent="."]
anchor_right = 0.316406
anchor_bottom = 0.836667
rect_min_size = Vector2( 324, 502 )
__meta__ = {
"_edit_use_anchors_": false
}

[node name="VBoxContainer" type="VBoxContainer" parent="ColorMenu"]
anchor_right = 1.0
anchor_bottom = 1.0
margin_left = 8.0
margin_top = 8.0
margin_right = -8.00003
margin_bottom = -8.00003
__meta__ = {
"_edit_use_anchors_": false
}

[node name="VoxelColor" type="ColorPicker" parent="ColorMenu/VBoxContainer"]
margin_left = 4.0
margin_top = 4.0
margin_right = 4.0
margin_bottom = 4.0
size_flags_horizontal = 3
size_flags_vertical = 3
__meta__ = {
"_edit_use_anchors_": false
}

[node name="HBoxContainer" type="HBoxContainer" parent="ColorMenu/VBoxContainer"]
margin_top = 466.0
margin_right = 308.0
margin_bottom = 486.0

[node name="Cancel" type="Button" parent="ColorMenu/VBoxContainer/HBoxContainer"]
margin_right = 152.0
margin_bottom = 20.0
size_flags_horizontal = 3
text = "Cancel"

[node name="Confirm" type="Button" parent="ColorMenu/VBoxContainer/HBoxContainer"]
margin_left = 156.0
margin_right = 308.0
margin_bottom = 20.0
size_flags_horizontal = 3
text = "Confirm"

[node name="TextureMenu" type="WindowDialog" parent="."]
anchor_right = 0.316406
anchor_bottom = 0.433333
rect_min_size = Vector2( 324, 260 )

[node name="VBoxContainer" type="VBoxContainer" parent="TextureMenu"]
anchor_right = 1.0
anchor_bottom = 1.0
margin_left = 8.0
margin_top = 8.0
margin_right = -8.00003
margin_bottom = -8.00003
__meta__ = {
"_edit_use_anchors_": false
}

[node name="ScrollContainer" type="ScrollContainer" parent="TextureMenu/VBoxContainer"]
margin_right = 307.0
margin_bottom = 219.0
size_flags_horizontal = 3
size_flags_vertical = 3

[node name="VoxelTexture" parent="TextureMenu/VBoxContainer/ScrollContainer" instance=ExtResource( 3 )]
anchor_right = 0.0
anchor_bottom = 0.0
margin_right = 307.0
margin_bottom = 219.0
size_flags_horizontal = 3
size_flags_vertical = 3
SelectMode = true
SelectionMax = 1
HoveredColor = Color( 1, 1, 1, 0.6 )
SelectionColor = Color( 1, 1, 1, 1 )
InvalidColor = Color( 1, 0, 0, 1 )
Voxel_Set = ExtResource( 4 )

[node name="HBoxContainer" type="HBoxContainer" parent="TextureMenu/VBoxContainer"]
margin_top = 223.0
margin_right = 307.0
margin_bottom = 243.0

[node name="Cancel" type="Button" parent="TextureMenu/VBoxContainer/HBoxContainer"]
margin_right = 151.0
margin_bottom = 20.0
size_flags_horizontal = 3
text = "Cancel"

[node name="Confirm" type="Button" parent="TextureMenu/VBoxContainer/HBoxContainer"]
margin_left = 155.0
margin_right = 307.0
margin_bottom = 20.0
size_flags_horizontal = 3
text = "Confirm"
[connection signal="gui_input" from="2DView/Left" to="." method="_on_Face_gui_input" binds= [ Vector3( -1, 0, 0 ) ]]
[connection signal="mouse_exited" from="2DView/Left" to="." method="set_hovered_face" binds= [ Vector3( 0, 0, 0 ) ]]
[connection signal="gui_input" from="2DView/Front" to="." method="_on_Face_gui_input" binds= [ Vector3( 0, 0, -1 ) ]]
[connection signal="mouse_exited" from="2DView/Front" to="." method="set_hovered_face" binds= [ Vector3( 0, 0, 0 ) ]]
[connection signal="gui_input" from="2DView/Right" to="." method="_on_Face_gui_input" binds= [ Vector3( 1, 0, 0 ) ]]
[connection signal="mouse_exited" from="2DView/Right" to="." method="set_hovered_face" binds= [ Vector3( 0, 0, 0 ) ]]
[connection signal="gui_input" from="2DView/Back" to="." method="_on_Face_gui_input" binds= [ Vector3( 0, 0, 1 ) ]]
[connection signal="mouse_exited" from="2DView/Back" to="." method="set_hovered_face" binds= [ Vector3( 0, 0, 0 ) ]]
[connection signal="gui_input" from="2DView/Top" to="." method="_on_Face_gui_input" binds= [ Vector3( 0, 1, 0 ) ]]
[connection signal="mouse_exited" from="2DView/Top" to="." method="set_hovered_face" binds= [ Vector3( 0, 0, 0 ) ]]
[connection signal="gui_input" from="2DView/Bottom" to="." method="_on_Face_gui_input" binds= [ Vector3( 0, -1, 0 ) ]]
[connection signal="mouse_exited" from="2DView/Bottom" to="." method="set_hovered_face" binds= [ Vector3( 0, 0, 0 ) ]]
[connection signal="gui_input" from="3DView" to="." method="_on_3DView_gui_input"]
[connection signal="item_selected" from="ToolBar/ViewMode" to="." method="set_view_mode"]
[connection signal="id_pressed" from="ContextMenu" to="." method="_on_ContextMenu_id_pressed"]
[connection signal="popup_hide" from="ColorMenu" to="." method="close_ColorMenu"]
[connection signal="color_changed" from="ColorMenu/VBoxContainer/VoxelColor" to="." method="_on_ColorPicker_color_changed"]
[connection signal="pressed" from="ColorMenu/VBoxContainer/HBoxContainer/Cancel" to="." method="close_ColorMenu"]
[connection signal="pressed" from="ColorMenu/VBoxContainer/HBoxContainer/Confirm" to="." method="_on_ColorMenu_Confirm_pressed"]
[connection signal="popup_hide" from="TextureMenu" to="." method="close_TextureMenu"]
[connection signal="pressed" from="TextureMenu/VBoxContainer/HBoxContainer/Cancel" to="." method="close_TextureMenu"]
[connection signal="pressed" from="TextureMenu/VBoxContainer/HBoxContainer/Confirm" to="." method="_on_TextureMenu_Confirm_pressed"]
